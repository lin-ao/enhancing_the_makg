**Enhancing the Microsoft Academic Knowledge Graph**  
Code for the Master Thesis "Enhancing the Microsoft Academic Knowledge Graph"
<br><br>

**Entity Resolution**  

Required Packages:
[pyjarowinkler](https://pypi.org/project/pyjarowinkler/)

Data preperation + disambiguation + recreating file format: 00.execute.sh executes files 00-14 with required sorting in between

Edit the following data paths for MAG files:  
* 00.prepare_paper_references.py: path to PaperReferences.txt  
* 01.extract_paper_id_with_doi.py: path to Papers.txt  
* 02.extract_author_with_paper_id.py: path to PaperAuthorAffiliations.txt  
* 03.extract_paper_with_author_id.py: path to PaperAuthorAffiliations.txt  
* 06.add_to_authors_paper_id.py: path to Authors.txt  
* 09.add_to_authors_titles.py: path to Papers.txt  
* 10.add_to_authors_year.py: path to Papers.txt  
* 11.add_to_authors_journal_and_conference.py: path to Papers.txt  
* 14.recreate_files.py: path to PaperAuthorAffiliations.txt  

Files 15-19 are used for evaluation in the Thesis

<br><br>
**Field of Study Classification**  

Required Packages:
[NLTK](http://www.nltk.org/), [Pandas](https://pypi.org/project/pandas/), [scikit-learn](https://scikit-learn.org/stable/index.html), [simpletransformers](https://pypi.org/project/simpletransformers/)

* files 00 and 01 are used to convert MAG paper abstracts from Inverted Indexes to Full Texts  
* file 02 is used to extract field of study labels from the MAG (all 19 low level FoS), edit the path to FieldsOfStudy.txt accordingly  
* files 03-06 require a sorted version of the PaperFieldsOfStudy.txt file, which can be done with the following code:
````
mkdir sort
split -l 5000000 -d PaperFieldsOfStudy.txt sort/sort_file
cd sort
for file in sort_file*; do
    echo $file
    LANG=en_US.UTF-8 LC_ALL=C sort -t$'\t' -k3 -o $file $file
    done
LANG=en_US.UTF-8 LC_ALL=C sort -t$'\t' -k3 sort_file* > ../SortedPaperFieldsOfStudy.txt
cd ..
rm -r sort
````
* execute file 03 in sequence to generate the data set using direct labels, edit path to the sorted PaperFieldsOfStudy.txt accordingly  
* execute both 04 files in sequence to generate the data set using indirect labels, edit paths to FieldOfStudyChildren.txt and the sorted PaperFieldsOfStudy.txt accordingly  
* execute all three 05 files in order to generate the data set using journal labels
* use file 06 in order to evaluate MAG labels from data sets generated by 03 and 04, edit the file path accordingly  
* use file 07 to generate training and evalution sets  
* use file 08 to train and evaluate the classifier, edit the model as well as hyperparameters accordingly  
* used file 09 to classify MAG papers  
